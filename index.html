<html>

<canvas id="gameCanvas" width = "450" height="700"> </canvas>

<script src="src/debug.js"></script>
<script src="src/bagEdit.js"></script>
<script src="src/gameLogic.js"></script>
<script src="src/controls.js"></script>
<script src="src/undoRedo.js"></script>
<script src="src/mino.js"></script>
<script src="src/graphics.js"></script>
<script src="src/minoPreviews.js"></script>
<script src="src/rotations.js"></script>
<script src="src/button.js"></script>
<script src="src/export.js"></script>
<script>

// Flag toggle globals
var noGhost = false;
var bitByBit = false;
var detailedSRS = false;

var buttons = [];

window.onload = function(){
	canvas = document.getElementById("gameCanvas");
	canvasContext = canvas.getContext('2d');
	loadKeyBinds();
	initializeBoard();
	initializeButtons()
	chooseMino();
	
	const FPS = 60;
		
	setInterval(function(){
		if (bagEdit){ // Flag for the bag editor UI
			bagEditor();
		}
		else{ // Main gamelogic loop
			move();
			draw();
			}
		}, 1000/FPS);
	
	window.addEventListener('keydown', keyPress);
	window.addEventListener('keyup', keyUnpress);

	canvas.addEventListener('mousedown',onClick);
	canvas.addEventListener('mousemove',
		function(e){
			var mousePos = calculateMousePos(e);
			mouseX=mousePos.x;
			mouseY=mousePos.y;
		});
}

</script>
</html>
